{"file_contents":{"replit.md":{"content":"# Biogram Health Platform\n\n## Overview\nBiogram is a public health insights dashboard designed to transform complex medical data into clear, accessible information. It features an Apple iPhone website-inspired UI, offering a clean, premium, and user-friendly experience across all sections. Built with Django and PostgreSQL, the application presents sample patient data with a strong emphasis on visual clarity and modern aesthetics. The platform's navigation is card-based, with a home dashboard providing access to five key sections, and each detail page includes a back button for easy return to the home screen.\n\n## User Preferences\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Backend\n- **Framework:** Django 5.2\n- **Database:** PostgreSQL (via Neon serverless)\n- **Session Management:** Django's built-in session framework\n- **Development Server:** Node.js wrapper (server.js) for npm compatibility\n- **Application Structure:** Public dashboard with no authentication required for demo purposes, sample data driven from `sample_data.py`, card-based home page navigation, and RESTful URL patterns with Django template rendering.\n\n### Frontend\n- **UI Framework:** Bootstrap 5 with custom Apple-inspired CSS.\n- **Design Aesthetic:** Apple iPhone website aesthetic with a unified purple gradient palette, bold headlines (64px), SF Pro font family, streamlined icons (50-60px), smooth fadeInUp animations, compact card designs, and tighter spacing.\n- **Visual Design System:** Includes 80px vertical padding for heroes with rounded bottom corners, 16-20px border-radius for cards with lighter shadows, a defined typography scale, subtle hover animations, compact emoji icons, and gradient badges for status indicators.\n- **Navigation:** Card-based home dashboard with 6 large navigation cards linking to Health Snapshot, Timeline, Wearable Insights, Medications, Lab Results, and Share with Doctor. Navbar hamburger menu includes additional options: Link Records Portal, Upload Documents, and Profile Settings. Each detail page includes a \"Back to Dashboard\" button.\n- **Key Page Features:**\n    - **Health Snapshot:** AI-Powered Health Insights with tabbed interface (Insights/Tips/Ask Doctor tabs) displaying health trends, guidance, and doctor questions in dismissible list format. Each list item shows an icon (âœ…/âš ï¸/â„¹ï¸/ðŸ’¡/â“), content, and dismiss button (âœ•) that fades out on click (300ms animation). Health conditions section features expandable accordion details and \"Resolved\" button to move items to timestamped resolved history.\n    - **Health Timeline:** Interactive vertical timeline with 17 chronologically sorted medical events, expandable/collapsible accordion-style cards (only one event expanded at a time), filter controls for date range (All Time, Last 30 Days, Last 6 Months, Last Year) and event type (6 checkbox filters: Hospital Visit, Emergency Room, Lab Test, Medication Change, Routine Checkup, New Diagnosis), smooth fade animations for filtering, and race-condition-free JavaScript using timeout tracking Map to ensure accurate filter behavior during rapid toggling.\n    - **Wearable Insights:** Displays 7 days of activity data with averages, heart rate range, and daily activity metrics.\n    - **Medications:** Comprehensive view of medications, interactions, and side effects.\n    - **Lab Results:** Visual presentation of 4 sample test results with large value displays and gradient status badges.\n    - **Share with Doctor:** Patient-facing page displaying auto-generated access code (VH-4829) and shareable link with copy-to-clipboard buttons. Includes step-by-step instructions for sharing during virtual visits.\n    - **Doctor Access Portal:** Secure code entry form for doctors to access patient health summaries during virtual visits. Session-based authentication prevents unauthorized direct access.\n    - **Doctor Health Summary:** Comprehensive clinical view showing active medical conditions with ICD-10 codes and status badges, current medications (deduplicated), AI-generated health insights, wearable data (7-day averages), patient questions, clinical guidance, and recent lab results. Professional layout with print functionality.\n    - **Link Records Portal:** Connection interface for linking external health records from Epic MyChart, Cerner Health, Apple Health, Google Fit, Healthgrades, and other providers.\n    - **Upload Documents:** File upload interface supporting PDF, JPG, PNG, DOC, and DOCX formats for medical records, lab results, prescriptions, imaging, vaccination records, and insurance cards.\n    - **Profile Settings:** User profile management with personal information, notification preferences (5 toggles), and privacy settings (2 toggles).\n\n### Technical Implementation\n- **Django Configuration:** Settings in `biogram/settings.py`, sample data in `sample_data.py`, URL routing in `core/urls.py` and `health/urls.py`, views in `core/views.py` and `health/views.py`, and templates in `templates/core/` and `templates/health/`.\n- **Session Management:** Django session framework used for doctor access authentication. Session flag `doctor_access_authorized` set after successful code entry to prevent unauthorized access to patient health summary.\n- **Development Workflow:** Uses `npm run dev` running `node server.js`, Django development server on port 5000, and StatReloader for auto-reload.\n\n## External Dependencies\n- **Database:** PostgreSQL (via Neon serverless)\n- **Frontend Libraries:** Bootstrap 5","size_bytes":5531},"health/urls.py":{"content":"from django.urls import path\nfrom . import views\n\nurlpatterns = [\n    path('timeline/', views.health_timeline, name='timeline'),\n    path('wearable/', views.wearable_insights, name='wearable_insights'),\n    path('medications/', views.medications_list, name='medications'),\n    path('lab-results/', views.lab_results, name='lab_results'),\n]","size_bytes":339},"health/apps.py":{"content":"from django.apps import AppConfig\n\n\nclass HealthConfig(AppConfig):\n    default_auto_field = 'django.db.models.BigAutoField'\n    name = 'health'\n","size_bytes":144},"biogram/__init__.py":{"content":"","size_bytes":0},"sample_data.py":{"content":"\"\"\"\nSample patient visit notes from different specialties for Biogram demo\nThese are realistic, de-identified medical notes that can be used for the app\n\"\"\"\n\nVISIT_NOTES = [\n    {\n        \"specialty\": \"Cardiology\",\n        \"visit_date\": \"2025-10-15\",\n        \"provider\": \"Dr. Sarah Chen, MD\",\n        \"chief_complaint\": \"Follow-up for hypertension and atrial fibrillation\",\n        \"subjective\": \"62-year-old male with history of hypertension and paroxysmal atrial fibrillation returns for follow-up. Reports good compliance with medications. Denies chest pain, palpitations, or shortness of breath. Occasional lightheadedness when standing quickly. Home BP readings averaging 128/78.\",\n        \"objective\": {\n            \"vitals\": {\n                \"BP\": \"132/82 mmHg\",\n                \"HR\": \"76 bpm (regular)\",\n                \"Weight\": \"185 lbs\",\n                \"BMI\": \"27.3\"\n            },\n            \"physical_exam\": \"Cardiovascular: Regular rate and rhythm, no murmurs. Lungs: Clear bilaterally. Extremities: No edema.\",\n            \"labs\": \"INR 2.3 (therapeutic range 2-3)\"\n        },\n        \"assessment\": [\n            \"Hypertension - well controlled on current regimen\",\n            \"Paroxysmal atrial fibrillation - stable, on anticoagulation\",\n            \"Orthostatic hypotension - mild\"\n        ],\n        \"plan\": [\n            \"Continue Lisinopril 20mg daily\",\n            \"Continue Metoprolol 50mg BID\",\n            \"Continue Warfarin 5mg daily, INR monitoring q4 weeks\",\n            \"Increase fluid intake, rise slowly from sitting/lying\",\n            \"Follow-up in 3 months\",\n            \"Consider home BP monitor\"\n        ],\n        \"medications\": [\n            {\"name\": \"Lisinopril\", \"dose\": \"20mg\", \"frequency\": \"Once daily\", \"purpose\": \"Blood pressure control\"},\n            {\"name\": \"Metoprolol\", \"dose\": \"50mg\", \"frequency\": \"Twice daily\", \"purpose\": \"Heart rate/rhythm control\"},\n            {\"name\": \"Warfarin\", \"dose\": \"5mg\", \"frequency\": \"Once daily\", \"purpose\": \"Blood thinner for AFib\"},\n            {\"name\": \"Atorvastatin\", \"dose\": \"40mg\", \"frequency\": \"Once daily at bedtime\", \"purpose\": \"Cholesterol management\"}\n        ]\n    },\n    {\n        \"specialty\": \"Endocrinology\",\n        \"visit_date\": \"2025-10-20\",\n        \"provider\": \"Dr. Michael Rodriguez, MD\",\n        \"chief_complaint\": \"Type 2 Diabetes management and thyroid follow-up\",\n        \"subjective\": \"58-year-old female with T2DM x 8 years and hypothyroidism. Reports improved glucose control with recent diet changes. Checking blood sugars 2x daily, fasting values 110-130. Denies polyuria, polydipsia, or vision changes. Energy level improved since thyroid dose adjustment last visit.\",\n        \"objective\": {\n            \"vitals\": {\n                \"BP\": \"138/84 mmHg\",\n                \"HR\": \"72 bpm\",\n                \"Weight\": \"172 lbs\",\n                \"BMI\": \"29.8\"\n            },\n            \"physical_exam\": \"Thyroid: No palpable nodules or enlargement. Feet: Intact sensation to monofilament, good pulses, no ulcerations.\",\n            \"labs\": {\n                \"HbA1c\": \"7.2% (previous 8.1%)\",\n                \"Fasting glucose\": \"118 mg/dL\",\n                \"TSH\": \"2.1 mIU/L (normal)\",\n                \"Creatinine\": \"0.9 mg/dL\",\n                \"eGFR\": \">60 mL/min\"\n            }\n        },\n        \"assessment\": [\n            \"Type 2 Diabetes Mellitus - improved control, HbA1c trending down\",\n            \"Hypothyroidism - well controlled on current levothyroxine dose\",\n            \"Obesity - BMI 29.8, patient motivated for weight loss\"\n        ],\n        \"plan\": [\n            \"Continue Metformin 1000mg BID\",\n            \"Continue Levothyroxine 100mcg daily\",\n            \"Add Jardiance 10mg daily for additional glucose control and cardiovascular benefit\",\n            \"Referral to nutritionist for diabetes education\",\n            \"Repeat HbA1c in 3 months\",\n            \"Annual dilated eye exam scheduled\",\n            \"Pneumococcal vaccine administered today\"\n        ],\n        \"medications\": [\n            {\"name\": \"Metformin\", \"dose\": \"1000mg\", \"frequency\": \"Twice daily with meals\", \"purpose\": \"Diabetes control\"},\n            {\"name\": \"Levothyroxine\", \"dose\": \"100mcg\", \"frequency\": \"Once daily on empty stomach\", \"purpose\": \"Thyroid hormone replacement\"},\n            {\"name\": \"Jardiance (Empagliflozin)\", \"dose\": \"10mg\", \"frequency\": \"Once daily\", \"purpose\": \"Diabetes and heart protection\"},\n            {\"name\": \"Aspirin\", \"dose\": \"81mg\", \"frequency\": \"Once daily\", \"purpose\": \"Cardiovascular protection\"}\n        ]\n    },\n    {\n        \"specialty\": \"Orthopedics\",\n        \"visit_date\": \"2025-10-22\",\n        \"provider\": \"Dr. Jennifer Park, MD\",\n        \"chief_complaint\": \"Right knee pain and osteoarthritis\",\n        \"subjective\": \"67-year-old active male with progressive right knee pain x 2 years, worse with stairs and prolonged standing. Pain rated 6/10 at worst. Morning stiffness lasting 15-20 minutes. Has tried OTC NSAIDs with moderate relief. No swelling, locking, or giving way. Enjoys golf but symptoms limiting activity.\",\n        \"objective\": {\n            \"vitals\": {\n                \"BP\": \"142/88 mmHg\",\n                \"Weight\": \"195 lbs\"\n            },\n            \"physical_exam\": \"Right knee: Mild effusion, crepitus with range of motion. ROM 0-120 degrees. Tender along medial joint line. Negative McMurray's. Stable ligaments. Able to bear full weight.\",\n            \"imaging\": \"X-ray right knee: Moderate medial joint space narrowing, osteophyte formation, no acute fracture\"\n        },\n        \"assessment\": [\n            \"Osteoarthritis right knee, moderate - Kellgren-Lawrence Grade 3\",\n            \"Hypertension - elevated reading today\"\n        ],\n        \"plan\": [\n            \"Trial of intra-articular hyaluronic acid injections (3 injection series)\",\n            \"Physical therapy referral - focus on quadriceps strengthening\",\n            \"Weight loss goal of 10-15 lbs to reduce joint stress\",\n            \"Continue acetaminophen as needed, avoid chronic NSAID use\",\n            \"Consider viscosupplementation if PT ineffective\",\n            \"Discuss total knee replacement if conservative management fails\",\n            \"Re-evaluate in 6 weeks\"\n        ],\n        \"medications\": [\n            {\"name\": \"Acetaminophen\", \"dose\": \"650mg\", \"frequency\": \"Up to 3 times daily as needed\", \"purpose\": \"Pain relief\"},\n            {\"name\": \"Glucosamine/Chondroitin\", \"dose\": \"1500mg/1200mg\", \"frequency\": \"Once daily\", \"purpose\": \"Joint health supplement\"},\n            {\"name\": \"Lisinopril\", \"dose\": \"10mg\", \"frequency\": \"Once daily\", \"purpose\": \"Blood pressure\"}\n        ]\n    },\n    {\n        \"specialty\": \"Primary Care\",\n        \"visit_date\": \"2025-10-25\",\n        \"provider\": \"Dr. Amanda Foster, MD\",\n        \"chief_complaint\": \"Annual physical examination\",\n        \"subjective\": \"45-year-old female for annual wellness visit. No acute concerns. Feels generally well. Exercises 3-4x per week (walking, yoga). Non-smoker, occasional alcohol use. Family history significant for maternal breast cancer at age 62. Last mammogram 13 months ago (normal). Menstrual cycles regular.\",\n        \"objective\": {\n            \"vitals\": {\n                \"BP\": \"118/76 mmHg\",\n                \"HR\": \"68 bpm\",\n                \"Weight\": \"148 lbs\",\n                \"Height\": \"5'5\\\"\",\n                \"BMI\": \"24.6\"\n            },\n            \"physical_exam\": \"General: Well-appearing. HEENT: Normal. Heart: RRR, no murmurs. Lungs: Clear. Abdomen: Soft, non-tender. Skin: No concerning lesions.\",\n            \"labs\": {\n                \"Total cholesterol\": \"198 mg/dL\",\n                \"LDL\": \"115 mg/dL\",\n                \"HDL\": \"62 mg/dL\",\n                \"Triglycerides\": \"105 mg/dL\",\n                \"Glucose\": \"94 mg/dL\",\n                \"TSH\": \"1.8 mIU/L\",\n                \"Vitamin D\": \"28 ng/mL (low normal)\"\n            }\n        },\n        \"assessment\": [\n            \"Health maintenance - annual exam\",\n            \"Vitamin D insufficiency\",\n            \"Family history of breast cancer - average risk screening appropriate\"\n        ],\n        \"plan\": [\n            \"All preventive screenings up to date\",\n            \"Mammogram scheduled for next month\",\n            \"Start Vitamin D3 2000 IU daily\",\n            \"Continue current healthy lifestyle\",\n            \"Tdap booster administered today\",\n            \"Colonoscopy due at age 45 - referral placed\",\n            \"Return in 1 year for annual exam\"\n        ],\n        \"medications\": [\n            {\"name\": \"Vitamin D3\", \"dose\": \"2000 IU\", \"frequency\": \"Once daily\", \"purpose\": \"Vitamin D supplementation\"},\n            {\"name\": \"Multivitamin\", \"dose\": \"1 tablet\", \"frequency\": \"Once daily\", \"purpose\": \"General wellness\"}\n        ]\n    },\n    {\n        \"specialty\": \"Gastroenterology\",\n        \"visit_date\": \"2025-10-28\",\n        \"provider\": \"Dr. Robert Kim, MD\",\n        \"chief_complaint\": \"Gastroesophageal reflux disease and IBS\",\n        \"subjective\": \"52-year-old male with longstanding GERD and irritable bowel syndrome. Reports heartburn 3-4x per week despite PPI therapy. Symptoms worse with coffee, spicy foods, late meals. Also notes alternating constipation and diarrhea. No alarm symptoms (weight loss, bleeding, dysphagia). Stress at work exacerbates GI symptoms.\",\n        \"objective\": {\n            \"vitals\": {\n                \"BP\": \"128/80 mmHg\",\n                \"Weight\": \"178 lbs\",\n                \"BMI\": \"26.1\"\n            },\n            \"physical_exam\": \"Abdomen: Soft, mild epigastric tenderness, normal bowel sounds, no masses or organomegaly.\",\n            \"recent_studies\": \"EGD 18 months ago: Mild esophagitis, small hiatal hernia, negative for Barrett's esophagus. H. pylori negative.\"\n        },\n        \"assessment\": [\n            \"Gastroesophageal reflux disease - suboptimal control on current therapy\",\n            \"Irritable bowel syndrome, mixed type\",\n            \"Small hiatal hernia\"\n        ],\n        \"plan\": [\n            \"Increase Omeprazole to 40mg twice daily (before breakfast and dinner)\",\n            \"Trial of alginate therapy (Gaviscon) after meals and bedtime\",\n            \"Dietary modifications: avoid trigger foods, smaller more frequent meals, no eating 3 hours before bed\",\n            \"Consider low FODMAP diet trial for IBS symptoms\",\n            \"Stress management techniques, consider mindfulness or therapy\",\n            \"Repeat EGD in 6 months if symptoms persist to reassess\",\n            \"Follow-up in 6 weeks\"\n        ],\n        \"medications\": [\n            {\"name\": \"Omeprazole\", \"dose\": \"40mg\", \"frequency\": \"Twice daily before meals\", \"purpose\": \"Reduce stomach acid\"},\n            {\"name\": \"Gaviscon\", \"dose\": \"2 tablets\", \"frequency\": \"After meals and bedtime\", \"purpose\": \"Acid barrier protection\"},\n            {\"name\": \"Dicyclomine\", \"dose\": \"20mg\", \"frequency\": \"As needed for cramping\", \"purpose\": \"IBS symptom relief\"},\n            {\"name\": \"Fiber supplement\", \"dose\": \"1 tablespoon\", \"frequency\": \"Once daily\", \"purpose\": \"Regulate bowel movements\"}\n        ]\n    }\n]\n\n\n# AI-generated insights based on the patient data\nAI_INSIGHTS = {\n    \"health_trends\": [\n        {\n            \"trend\": \"Blood Pressure Trending Up\",\n            \"description\": \"Your blood pressure readings have been creeping higher over the past 3 months. Current average is 132/82, up from 122/76.\",\n            \"severity\": \"moderate\",\n            \"recommendation\": \"Monitor at home daily and discuss medication adjustment with your cardiologist.\"\n        },\n        {\n            \"trend\": \"Diabetes Control Improving\",\n            \"description\": \"Excellent progress! Your HbA1c has dropped from 8.1% to 7.2% over 3 months. This means much better blood sugar control.\",\n            \"severity\": \"positive\",\n            \"recommendation\": \"Keep up the great work with diet changes. Continue monitoring blood sugars twice daily.\"\n        },\n        {\n            \"trend\": \"Vitamin D Still Low\",\n            \"description\": \"Despite supplementation, your Vitamin D level is at the low end of normal (28 ng/mL). Optimal is above 30.\",\n            \"severity\": \"mild\",\n            \"recommendation\": \"Consider increasing Vitamin D3 to 4000 IU daily and get 15 minutes of midday sun exposure when possible.\"\n        }\n    ],\n    \"health_guidance\": [\n        \"**Heart Health Priority**: With AFib and rising BP, focus on reducing sodium to under 2000mg daily and increase potassium-rich foods (bananas, spinach, avocados).\",\n        \"**Medication Timing Matters**: Take Levothyroxine 30-60 minutes before breakfast on an empty stomach for best absorption. Don't take with coffee.\",\n        \"**Joint Protection**: Before knee replacement becomes necessary, losing 10-15 lbs could significantly reduce pain and slow arthritis progression.\",\n        \"**GERD Management**: Elevate head of bed 6-8 inches and try eating dinner by 6 PM - this alone can reduce nighttime reflux by 50%.\",\n        \"**Bleeding Risk Awareness**: You're on Warfarin - avoid NSAIDs (ibuprofen, naproxen) as they can increase bleeding risk. Acetaminophen is safer for pain.\"\n    ],\n    \"doctor_questions\": [\n        \"My BP is still high despite medications - should we increase the Lisinopril dose or add another medication?\",\n        \"I'm taking 11 different medications - are there any that could be combined or eliminated?\",\n        \"The Warfarin requires frequent blood tests - is there a newer blood thinner that would be easier to manage?\",\n        \"Could my GERD medications (Omeprazole) be interfering with my other drugs? I've heard PPIs can affect absorption.\",\n        \"What are the warning signs of a stroke or heart attack I should watch for given my AFib and hypertension?\",\n        \"Is it safe to take Glucosamine with Warfarin? I've read conflicting information online.\"\n    ]\n}\n\n\n# Health Timeline Events - chronological medical history\nTIMELINE_EVENTS = [\n    {\n        \"date\": \"2025-10-20\",\n        \"event_type\": \"Office Visit\",\n        \"icon\": \"ðŸ¥\",\n        \"color\": \"primary\",\n        \"title\": \"Endocrinology Follow-Up\",\n        \"provider\": \"Dr. Michael Rodriguez\",\n        \"location\": \"Endocrine Clinic\",\n        \"description\": \"Diabetes and thyroid checkup. Great news - your blood sugar control improved! A1C dropped from 8.1% to 7.2%.\",\n        \"details\": [\n            \"Started new diabetes medication (Jardiance) for better blood sugar control and heart protection\",\n            \"Thyroid levels are perfect - current medication dose is working well\",\n            \"Lost 6 pounds since last visit - keep up the good work!\",\n            \"Scheduled eye exam to check for diabetes-related changes\"\n        ]\n    },\n    {\n        \"date\": \"2025-10-15\",\n        \"event_type\": \"Office Visit\",\n        \"icon\": \"â¤ï¸\",\n        \"color\": \"danger\",\n        \"title\": \"Cardiology Follow-Up\",\n        \"provider\": \"Dr. Sarah Chen\",\n        \"location\": \"Heart Center\",\n        \"description\": \"Heart rhythm and blood pressure check. Everything is well-controlled on your current medications.\",\n        \"details\": [\n            \"Heart rate is steady at 76 beats per minute\",\n            \"Blood thinner level is perfect (INR 2.3)\",\n            \"Blood pressure slightly high at 132/82 - increasing medication dose\",\n            \"No heart racing or palpitations reported\"\n        ]\n    },\n    {\n        \"date\": \"2025-09-28\",\n        \"event_type\": \"Lab Results\",\n        \"icon\": \"ðŸ”¬\",\n        \"color\": \"info\",\n        \"title\": \"Quarterly Blood Work\",\n        \"provider\": \"Quest Diagnostics\",\n        \"location\": \"Lab\",\n        \"description\": \"Routine monitoring labs for diabetes, kidney function, and cholesterol.\",\n        \"details\": [\n            \"A1C: 7.2% (down from 8.1% - great improvement!)\",\n            \"Kidney function: Normal (eGFR >60)\",\n            \"Cholesterol: LDL 95 mg/dL (goal met with statin)\",\n            \"Liver enzymes: Normal\",\n            \"Thyroid (TSH): 2.1 - perfect range\"\n        ]\n    },\n    {\n        \"date\": \"2025-09-15\",\n        \"event_type\": \"Procedure\",\n        \"icon\": \"ðŸ’‰\",\n        \"color\": \"warning\",\n        \"title\": \"Knee Injection - Session 1 of 3\",\n        \"provider\": \"Dr. James Martinez\",\n        \"location\": \"Orthopedic Surgery Center\",\n        \"description\": \"First gel injection into right knee for arthritis pain relief.\",\n        \"details\": [\n            \"Hyaluronic acid injection to cushion knee joint\",\n            \"Procedure well-tolerated with minimal discomfort\",\n            \"May feel some temporary soreness for 24-48 hours\",\n            \"Next injection scheduled in 1 week\",\n            \"Should see improvement after completing all 3 sessions\"\n        ]\n    },\n    {\n        \"date\": \"2025-08-30\",\n        \"event_type\": \"Office Visit\",\n        \"icon\": \"ðŸ¦´\",\n        \"color\": \"secondary\",\n        \"title\": \"Orthopedic Consultation\",\n        \"provider\": \"Dr. James Martinez\",\n        \"location\": \"Orthopedic Clinic\",\n        \"description\": \"First visit for right knee pain. X-rays taken and treatment plan discussed.\",\n        \"details\": [\n            \"X-rays show moderate arthritis in right knee\",\n            \"Knee is stable with good range of motion (0-120 degrees)\",\n            \"Pain rated 6 out of 10, worse on stairs\",\n            \"Starting with gel injections (3 sessions)\",\n            \"Physical therapy referral for strengthening exercises\",\n            \"Discussed weight loss goal of 10-15 pounds to reduce knee stress\"\n        ]\n    },\n    {\n        \"date\": \"2025-07-22\",\n        \"event_type\": \"Medication Change\",\n        \"icon\": \"ðŸ’Š\",\n        \"color\": \"success\",\n        \"title\": \"Blood Pressure Medication Increased\",\n        \"provider\": \"Dr. Sarah Chen\",\n        \"location\": \"Phone Consultation\",\n        \"description\": \"Lisinopril dose increased from 10mg to 20mg due to higher home blood pressure readings.\",\n        \"details\": [\n            \"Home BP readings averaging 135/85 (above goal of 130/80)\",\n            \"Doubled Lisinopril dose to better control blood pressure\",\n            \"Monitor BP at home for 2 weeks and report back\",\n            \"Watch for dry cough or dizziness as possible side effects\",\n            \"May add water pill (diuretic) if BP still high in 2 weeks\"\n        ]\n    },\n    {\n        \"date\": \"2025-06-10\",\n        \"event_type\": \"Lab Results\",\n        \"icon\": \"ðŸ”¬\",\n        \"color\": \"info\",\n        \"title\": \"INR Blood Test\",\n        \"provider\": \"Anticoagulation Clinic\",\n        \"location\": \"Lab\",\n        \"description\": \"Monthly blood thinner monitoring - level is in perfect range.\",\n        \"details\": [\n            \"INR: 2.3 (target range 2.0-3.0)\",\n            \"Warfarin dose remains at 5mg daily\",\n            \"No dose adjustment needed\",\n            \"Continue current diet and avoid major changes to vitamin K intake\",\n            \"Next INR check in 4 weeks\"\n        ]\n    },\n    {\n        \"date\": \"2025-05-18\",\n        \"event_type\": \"Emergency Visit\",\n        \"icon\": \"ðŸš¨\",\n        \"color\": \"danger\",\n        \"title\": \"ER Visit - Acid Reflux Flare\",\n        \"provider\": \"Dr. Amanda Lee\",\n        \"location\": \"County Hospital ER\",\n        \"description\": \"Went to ER with severe chest burning. Heart was checked and ruled out - it was acid reflux.\",\n        \"details\": [\n            \"Severe heartburn mistaken for possible heart attack\",\n            \"EKG and cardiac enzymes normal - heart is fine\",\n            \"Diagnosed with severe acid reflux (GERD) flare-up\",\n            \"Given antacid medication in ER with good relief\",\n            \"Prescribed Omeprazole 20mg twice daily\",\n            \"Advised to avoid spicy foods, caffeine, late meals\",\n            \"Follow up with primary care doctor in 1 week\"\n        ]\n    },\n    {\n        \"date\": \"2025-04-12\",\n        \"event_type\": \"Office Visit\",\n        \"icon\": \"ðŸ¥\",\n        \"color\": \"primary\",\n        \"title\": \"Annual Physical Exam\",\n        \"provider\": \"Dr. Robert Thompson\",\n        \"location\": \"Primary Care Clinic\",\n        \"description\": \"Yearly checkup - reviewed all your conditions and updated preventive care.\",\n        \"details\": [\n            \"Blood pressure: 128/78 (good control)\",\n            \"Weight: 178 lbs (down 3 lbs from last year)\",\n            \"All chronic conditions stable and well-managed\",\n            \"Flu shot given\",\n            \"Colonoscopy due next year (last one 8 years ago)\",\n            \"Continue all current medications\",\n            \"Keep up the great work with diet and exercise!\"\n        ]\n    },\n    {\n        \"date\": \"2025-03-15\",\n        \"event_type\": \"New Diagnosis\",\n        \"icon\": \"ðŸ“‹\",\n        \"color\": \"warning\",\n        \"title\": \"Irregular Heartbeat Diagnosed\",\n        \"provider\": \"Dr. Sarah Chen\",\n        \"location\": \"Heart Center\",\n        \"description\": \"Episodes of heart racing led to diagnosis of atrial fibrillation (irregular heartbeat).\",\n        \"details\": [\n            \"24-hour heart monitor showed periods of irregular rhythm\",\n            \"Diagnosed with paroxysmal atrial fibrillation (comes and goes)\",\n            \"Started Metoprolol to control heart rate\",\n            \"Started Warfarin blood thinner to prevent stroke risk\",\n            \"Will need regular INR monitoring\",\n            \"Discussed lifestyle changes: limit caffeine and alcohol\",\n            \"Risk is manageable with proper treatment\"\n        ]\n    },\n    {\n        \"date\": \"2025-02-20\",\n        \"event_type\": \"Office Visit\",\n        \"icon\": \"ðŸ¥\",\n        \"color\": \"primary\",\n        \"title\": \"Primary Care - Heart Palpitations\",\n        \"provider\": \"Dr. Robert Thompson\",\n        \"location\": \"Primary Care Clinic\",\n        \"description\": \"Reported episodes of heart racing and fluttering. Referred to cardiologist for evaluation.\",\n        \"details\": [\n            \"Episodes of rapid heartbeat lasting 10-30 minutes\",\n            \"Sometimes feel lightheaded during episodes\",\n            \"EKG in office showed normal rhythm at that moment\",\n            \"Referred to cardiology for further testing\",\n            \"Ordered 24-hour heart monitor\",\n            \"Advised to avoid caffeine and energy drinks\"\n        ]\n    },\n    {\n        \"date\": \"2024-11-08\",\n        \"event_type\": \"Lab Results\",\n        \"icon\": \"ðŸ”¬\",\n        \"color\": \"info\",\n        \"title\": \"Diabetes Monitoring Labs\",\n        \"provider\": \"LabCorp\",\n        \"location\": \"Lab\",\n        \"description\": \"Quarterly diabetes checkup showed A1C of 8.1% - above goal, leading to diet changes.\",\n        \"details\": [\n            \"A1C: 8.1% (goal is below 7.0%)\",\n            \"Fasting blood sugar: 142 mg/dL (higher than target)\",\n            \"Kidney function: Normal\",\n            \"Cholesterol: Borderline high\",\n            \"Doctor recommended stricter diet and increased exercise\",\n            \"Discussed possibly adding second diabetes medication\"\n        ]\n    },\n    {\n        \"date\": \"2024-08-05\",\n        \"event_type\": \"Medication Change\",\n        \"icon\": \"ðŸ’Š\",\n        \"color\": \"success\",\n        \"title\": \"Thyroid Medication Dose Adjusted\",\n        \"provider\": \"Dr. Michael Rodriguez\",\n        \"location\": \"Phone Consultation\",\n        \"description\": \"Increased Levothyroxine from 75mcg to 100mcg due to low thyroid levels.\",\n        \"details\": [\n            \"TSH level was 6.8 (higher than normal range)\",\n            \"Symptoms: Fatigue, feeling cold, slight weight gain\",\n            \"Increased thyroid medication dose\",\n            \"Recheck TSH in 6 weeks after dose change\",\n            \"Should notice improved energy in 3-4 weeks\"\n        ]\n    },\n    {\n        \"date\": \"2024-06-15\",\n        \"event_type\": \"Office Visit\",\n        \"icon\": \"ðŸ¥\",\n        \"color\": \"primary\",\n        \"title\": \"GI Specialist - Ongoing Heartburn\",\n        \"provider\": \"Dr. Patricia Williams\",\n        \"location\": \"Gastroenterology Associates\",\n        \"description\": \"First visit to GI doctor for chronic heartburn. Upper endoscopy scheduled.\",\n        \"details\": [\n            \"Heartburn 3-4 times per week despite over-the-counter antacids\",\n            \"Worse with coffee, spicy foods, and eating late at night\",\n            \"No trouble swallowing or weight loss\",\n            \"Diagnosed with GERD (chronic acid reflux)\",\n            \"Started prescription Omeprazole 20mg daily\",\n            \"Scheduled for upper endoscopy in 2 weeks\",\n            \"Lifestyle changes discussed: raise bed, avoid trigger foods\"\n        ]\n    },\n    {\n        \"date\": \"2023-11-15\",\n        \"event_type\": \"New Diagnosis\",\n        \"icon\": \"ðŸ“‹\",\n        \"color\": \"warning\",\n        \"title\": \"Type 2 Diabetes Diagnosed\",\n        \"provider\": \"Dr. Robert Thompson\",\n        \"location\": \"Primary Care Clinic\",\n        \"description\": \"Routine blood work showed high blood sugar. Diagnosed with Type 2 Diabetes.\",\n        \"details\": [\n            \"Fasting blood sugar: 186 mg/dL (normal is under 100)\",\n            \"A1C: 8.9% (diabetes is 6.5% or higher)\",\n            \"No symptoms noticed - found on routine screening\",\n            \"Started Metformin 500mg twice daily\",\n            \"Referred to diabetes educator\",\n            \"Given blood sugar monitor and supplies\",\n            \"Discussed diet changes and importance of exercise\",\n            \"This is manageable with medication and lifestyle changes\"\n        ]\n    },\n    {\n        \"date\": \"2023-06-20\",\n        \"event_type\": \"New Diagnosis\",\n        \"icon\": \"ðŸ“‹\",\n        \"color\": \"warning\",\n        \"title\": \"Underactive Thyroid Diagnosed\",\n        \"provider\": \"Dr. Michael Rodriguez\",\n        \"location\": \"Endocrine Clinic\",\n        \"description\": \"Fatigue and weight gain led to diagnosis of hypothyroidism (underactive thyroid).\",\n        \"details\": [\n            \"Symptoms: Constant fatigue, weight gain, feeling cold\",\n            \"TSH: 12.4 (very high - normal is 0.5-5.0)\",\n            \"Diagnosed with primary hypothyroidism\",\n            \"Started Levothyroxine 75mcg every morning\",\n            \"Take on empty stomach, 30-60 minutes before eating\",\n            \"Should feel better in 4-6 weeks\",\n            \"Recheck thyroid levels in 6 weeks\",\n            \"This is a lifelong condition but very treatable\"\n        ]\n    },\n    {\n        \"date\": \"2018-06-10\",\n        \"event_type\": \"New Diagnosis\",\n        \"icon\": \"ðŸ“‹\",\n        \"color\": \"warning\",\n        \"title\": \"High Blood Pressure Diagnosed\",\n        \"provider\": \"Dr. Robert Thompson\",\n        \"location\": \"Primary Care Clinic\",\n        \"description\": \"Blood pressure consistently high at multiple visits. Started on medication.\",\n        \"details\": [\n            \"Blood pressure: 148/94 (confirmed high on 3 separate visits)\",\n            \"Diagnosed with essential hypertension\",\n            \"Started Lisinopril 10mg daily\",\n            \"Recommended home blood pressure monitoring\",\n            \"Discussed reducing salt intake\",\n            \"Encouraged regular exercise and weight loss\",\n            \"Follow up in 4 weeks to check if medication is working\"\n        ]\n    }\n]\n\n\n# Active medical problems with SOAP summaries\nACTIVE_PROBLEMS = [\n    {\n        \"problem\": \"Irregular Heartbeat (Atrial Fibrillation)\",\n        \"icd10\": \"I48.0\",\n        \"onset\": \"March 2023\",\n        \"status\": \"Stable\",\n        \"simple_summary\": {\n            \"what_you_said\": \"No heart racing or palpitations lately. Feeling good on current medications. Taking blood thinner as prescribed.\",\n            \"what_tests_showed\": \"Heart rate is steady at 76 beats per minute. Blood thinness level is perfect (2.3). Heart rhythm test looks normal.\",\n            \"what_it_means\": \"Your irregular heartbeat is well-managed with medication. The blood thinner is working to prevent stroke risk.\",\n            \"what_were_doing\": \"Keep taking Metoprolol (controls heart rate) and Warfarin (prevents blood clots). Get monthly blood tests to check clotting levels.\"\n        }\n    },\n    {\n        \"problem\": \"High Blood Pressure\",\n        \"icd10\": \"I10\",\n        \"onset\": \"June 2018\",\n        \"status\": \"Needs Adjustment\",\n        \"simple_summary\": {\n            \"what_you_said\": \"Blood pressure at home usually 128-135 over 80. Taking medications regularly. Sometimes get headaches in the morning.\",\n            \"what_tests_showed\": \"Blood pressure in office was 132/82 (a bit high). Should be under 130/80 given your other conditions.\",\n            \"what_it_means\": \"Your blood pressure is slightly above goal. We may need to increase your medication or add another one.\",\n            \"what_were_doing\": \"Increasing Lisinopril dose. Track blood pressure at home for 2 weeks. May add water pill if needed. Try reducing salt in diet.\"\n        }\n    },\n    {\n        \"problem\": \"Type 2 Diabetes\",\n        \"icd10\": \"E11.9\",\n        \"onset\": \"November 2017\",\n        \"status\": \"Improving\",\n        \"simple_summary\": {\n            \"what_you_said\": \"Blood sugar control is better since changing diet. Morning readings 110-130. Checking twice daily. Lost 6 pounds!\",\n            \"what_tests_showed\": \"Your 3-month blood sugar average dropped from 8.1% to 7.2% - great improvement! Feet look healthy, no nerve damage.\",\n            \"what_it_means\": \"The diet changes and Metformin are working well. New medication will help protect your heart and kidneys too.\",\n            \"what_were_doing\": \"Continue Metformin. Starting Jardiance (helps heart and sugar). Goal is to get below 7%. Eye exam scheduled. Keep up the great work!\"\n        }\n    },\n    {\n        \"problem\": \"Knee Arthritis (Right)\",\n        \"icd10\": \"M17.11\",\n        \"onset\": \"April 2022\",\n        \"status\": \"Getting Worse\",\n        \"simple_summary\": {\n            \"what_you_said\": \"Right knee hurts at 6 out of 10, especially on stairs. Stiff for 15-20 minutes in morning. Can't play golf as much.\",\n            \"what_tests_showed\": \"X-ray shows moderate wear-and-tear in knee joint. Good range of motion (0-120 degrees). Knee is stable.\",\n            \"what_it_means\": \"Moderate arthritis in your knee. Let's try some treatments before considering surgery.\",\n            \"what_were_doing\": \"Gel injections in knee (3 sessions). Physical therapy to strengthen leg muscles. Try to lose 10-15 lbs. Take Tylenol for pain. May discuss knee replacement in 6 months if no improvement.\"\n        }\n    },\n    {\n        \"problem\": \"Acid Reflux (GERD)\",\n        \"icd10\": \"K21.9\",\n        \"onset\": \"July 2019\",\n        \"status\": \"Needs Better Control\",\n        \"simple_summary\": {\n            \"what_you_said\": \"Heartburn 3-4 times a week even with medication. Worse after coffee, spicy food, or late dinner. No trouble swallowing.\",\n            \"what_tests_showed\": \"Mild stomach irritation on last scope. Small hiatal hernia (stomach pushes through diaphragm). No serious damage.\",\n            \"what_it_means\": \"Acid reflux isn't fully controlled yet. Lifestyle changes plus more medication should help.\",\n            \"what_were_doing\": \"Doubling Omeprazole dose (take twice daily). Add Gaviscon after meals. Stop eating 3 hours before bed. Raise head of bed 6 inches. Repeat scope if not better in 6 months.\"\n        }\n    },\n    {\n        \"problem\": \"Underactive Thyroid\",\n        \"icd10\": \"E03.9\",\n        \"onset\": \"February 2020\",\n        \"status\": \"Well Controlled\",\n        \"simple_summary\": {\n            \"what_you_said\": \"Energy is good. No feeling cold, weight gain, or hair loss. Taking thyroid pill every morning on empty stomach.\",\n            \"what_tests_showed\": \"Thyroid hormone level is 2.1 (perfect range is 0.5-5.0). No lumps in thyroid gland. Weight is stable.\",\n            \"what_it_means\": \"Your thyroid medication dose is just right. Everything looks good.\",\n            \"what_were_doing\": \"Keep taking Levothyroxine 100mcg every morning. Recheck levels in 6 months. Remember to take 30-60 minutes before breakfast.\"\n        }\n    }\n]\n\n\n# Medication interaction warnings and side effects\nMEDICATION_INTERACTIONS = {\n    \"Warfarin\": {\n        \"interactions\": [\n            {\n                \"with\": \"Acetaminophen\",\n                \"severity\": \"Moderate\",\n                \"description\": \"High doses of acetaminophen (>2g/day for several days) may increase bleeding risk. Monitor INR if using regularly.\"\n            },\n            {\n                \"with\": \"Omeprazole\",\n                \"severity\": \"Minor\",\n                \"description\": \"May slightly increase Warfarin levels. Monitor INR after starting or stopping PPIs.\"\n            },\n            {\n                \"with\": \"Atorvastatin\",\n                \"severity\": \"Moderate\",\n                \"description\": \"May enhance anticoagulant effect. Close INR monitoring recommended, especially when starting therapy.\"\n            }\n        ],\n        \"side_effects\": [\n            \"Easy bruising or unusual bleeding (gums, nose, urine)\",\n            \"Blood in stool or black, tarry stools\",\n            \"Severe headache or dizziness\",\n            \"Avoid green leafy vegetables in large amounts (Vitamin K)\",\n            \"Report any falls or head injuries immediately\"\n        ]\n    },\n    \"Metformin\": {\n        \"interactions\": [\n            {\n                \"with\": \"Lisinopril\",\n                \"severity\": \"Minor\",\n                \"description\": \"ACE inhibitors may enhance glucose-lowering effect. Monitor blood sugar closely.\"\n            }\n        ],\n        \"side_effects\": [\n            \"Nausea or diarrhea (usually temporary, take with food)\",\n            \"Vitamin B12 deficiency with long-term use (check levels yearly)\",\n            \"Lactic acidosis (rare but serious - avoid if kidney problems worsen)\",\n            \"Metallic taste in mouth\",\n            \"Stop 48 hours before any procedure with IV contrast dye\"\n        ]\n    },\n    \"Lisinopril\": {\n        \"interactions\": [\n            {\n                \"with\": \"Jardiance\",\n                \"severity\": \"Moderate\",\n                \"description\": \"Both can lower blood pressure. Monitor for dizziness or lightheadedness when standing.\"\n            }\n        ],\n        \"side_effects\": [\n            \"Dry, persistent cough (affects 10-15% of people)\",\n            \"Dizziness when standing up (orthostatic hypotension)\",\n            \"High potassium levels (avoid potassium supplements and salt substitutes)\",\n            \"Swelling of face, lips, or tongue (angioedema - rare but serious)\",\n            \"Monitor kidney function and potassium levels regularly\"\n        ]\n    },\n    \"Omeprazole\": {\n        \"interactions\": [\n            {\n                \"with\": \"Metformin\",\n                \"severity\": \"Minor\",\n                \"description\": \"PPIs may affect Metformin absorption slightly.\"\n            },\n            {\n                \"with\": \"Warfarin\",\n                \"severity\": \"Minor\",\n                \"description\": \"May slightly increase Warfarin effect. Monitor INR.\"\n            }\n        ],\n        \"side_effects\": [\n            \"Headache or nausea (usually mild)\",\n            \"Increased risk of bone fractures with long-term use (>1 year)\",\n            \"May reduce absorption of Vitamin B12, calcium, and magnesium\",\n            \"Slightly increased risk of C. difficile infection\",\n            \"Consider taking calcium and magnesium supplements\",\n            \"Use lowest effective dose for shortest duration needed\"\n        ]\n    },\n    \"Atorvastatin\": {\n        \"interactions\": [\n            {\n                \"with\": \"Warfarin\",\n                \"severity\": \"Moderate\",\n                \"description\": \"May increase bleeding risk. Monitor INR closely.\"\n            }\n        ],\n        \"side_effects\": [\n            \"Muscle pain or weakness (report immediately - could indicate rhabdomyolysis)\",\n            \"Liver enzyme elevation (get liver tests at baseline and as needed)\",\n            \"Take at bedtime as cholesterol is made at night\",\n            \"Avoid grapefruit juice (increases statin levels significantly)\",\n            \"Report severe muscle pain, dark urine, or unusual fatigue\"\n        ]\n    },\n    \"Metoprolol\": {\n        \"interactions\": [\n            {\n                \"with\": \"Lisinopril\",\n                \"severity\": \"Moderate\",\n                \"description\": \"Both lower blood pressure and heart rate. Monitor for excessive lowering.\"\n            }\n        ],\n        \"side_effects\": [\n            \"Fatigue or tiredness (often improves over time)\",\n            \"Cold hands and feet (reduced circulation)\",\n            \"Dizziness or lightheadedness\",\n            \"Don't stop suddenly - must taper off to avoid rebound hypertension\",\n            \"May mask symptoms of low blood sugar if diabetic\"\n        ]\n    }\n}","size_bytes":36373},"main.py":{"content":"def main():\n    print(\"Hello from repl-nix-workspace!\")\n\n\nif __name__ == \"__main__\":\n    main()\n","size_bytes":96},"run.py":{"content":"#!/usr/bin/env python\nimport os\nimport sys\n\nif __name__ == \"__main__\":\n    os.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"biogram.settings\")\n    \n    from django.core.management import execute_from_command_line\n    \n    # Run Django development server on port 5000\n    execute_from_command_line([\"manage.py\", \"runserver\", \"0.0.0.0:5000\"])","size_bytes":340},"biogram/asgi.py":{"content":"\"\"\"\nASGI config for biogram project.\n\nIt exposes the ASGI callable as a module-level variable named ``application``.\n\nFor more information on this file, see\nhttps://docs.djangoproject.com/en/5.2/howto/deployment/asgi/\n\"\"\"\n\nimport os\n\nfrom django.core.asgi import get_asgi_application\n\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'biogram.settings')\n\napplication = get_asgi_application()\n","size_bytes":391},"biogram/urls.py":{"content":"\"\"\"\nURL configuration for biogram project.\n\nThe `urlpatterns` list routes URLs to views. For more information please see:\n    https://docs.djangoproject.com/en/5.2/topics/http/urls/\nExamples:\nFunction views\n    1. Add an import:  from my_app import views\n    2. Add a URL to urlpatterns:  path('', views.home, name='home')\nClass-based views\n    1. Add an import:  from other_app.views import Home\n    2. Add a URL to urlpatterns:  path('', Home.as_view(), name='home')\nIncluding another URLconf\n    1. Import the include() function: from django.urls import include, path\n    2. Add a URL to urlpatterns:  path('blog/', include('blog.urls'))\n\"\"\"\nfrom django.contrib import admin\nfrom django.urls import path, include\nfrom django.conf import settings\nfrom django.conf.urls.static import static\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path('', include('core.urls')),\n    path('health/', include('health.urls')),\n]\n\n# Serve media files in development\nif settings.DEBUG:\n    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)\n    urlpatterns += static(settings.STATIC_URL, document_root=settings.STATIC_ROOT)\n","size_bytes":1148},"core/admin.py":{"content":"from django.contrib import admin\n\n# Register your models here.\n","size_bytes":63},"core/urls.py":{"content":"from django.urls import path\nfrom . import views\n\nurlpatterns = [\n    path('', views.home_view, name='home'),\n    path('snapshot/', views.dashboard_view, name='health_snapshot'),\n    path('link-records/', views.link_records_view, name='link_records'),\n    path('upload-documents/', views.upload_documents_view, name='upload_documents'),\n    path('profile-settings/', views.profile_settings_view, name='profile_settings'),\n    path('share-with-doctor/', views.share_with_doctor_view, name='share_with_doctor'),\n    path('doctor-access/', views.doctor_access_view, name='doctor_access'),\n    path('doctor-summary/', views.doctor_summary_view, name='doctor_summary'),\n]","size_bytes":666},"health/admin.py":{"content":"from django.contrib import admin\nfrom .models import (\n    UserProfile, HealthRecord, Medication, LabResult,\n    VitalSign, WearableData, AIInsight, QuickNote\n)\n\n# Custom admin classes for better display\n@admin.register(UserProfile)\nclass UserProfileAdmin(admin.ModelAdmin):\n    list_display = ['user', 'phone', 'blood_type', 'created_at']\n    search_fields = ['user__username', 'user__email']\n\n@admin.register(HealthRecord)\nclass HealthRecordAdmin(admin.ModelAdmin):\n    list_display = ['user', 'event_type', 'title', 'date', 'provider', 'is_important']\n    list_filter = ['event_type', 'is_important', 'date']\n    search_fields = ['title', 'description', 'provider']\n    date_hierarchy = 'date'\n\n@admin.register(Medication)\nclass MedicationAdmin(admin.ModelAdmin):\n    list_display = ['user', 'name', 'dosage', 'frequency', 'is_active', 'start_date']\n    list_filter = ['is_active', 'frequency']\n    search_fields = ['name', 'purpose']\n\n@admin.register(LabResult)\nclass LabResultAdmin(admin.ModelAdmin):\n    list_display = ['user', 'test_name', 'value', 'status', 'test_date']\n    list_filter = ['status', 'test_date']\n    search_fields = ['test_name', 'provider']\n\n@admin.register(VitalSign)\nclass VitalSignAdmin(admin.ModelAdmin):\n    list_display = ['user', 'recorded_at', 'blood_pressure_systolic', 'blood_pressure_diastolic', 'heart_rate']\n    list_filter = ['source', 'recorded_at']\n    date_hierarchy = 'recorded_at'\n\n@admin.register(WearableData)\nclass WearableDataAdmin(admin.ModelAdmin):\n    list_display = ['user', 'device_name', 'date', 'steps', 'heart_rate_avg', 'sleep_hours']\n    list_filter = ['device_name', 'date']\n    date_hierarchy = 'date'\n\n@admin.register(AIInsight)\nclass AIInsightAdmin(admin.ModelAdmin):\n    list_display = ['user', 'title', 'insight_type', 'priority', 'is_completed', 'created_at']\n    list_filter = ['insight_type', 'priority', 'is_completed']\n    search_fields = ['title', 'description']\n\n@admin.register(QuickNote)\nclass QuickNoteAdmin(admin.ModelAdmin):\n    list_display = ['user', 'content', 'is_pinned', 'created_at']\n    list_filter = ['is_pinned', 'created_at']\n    search_fields = ['content']\n","size_bytes":2146},"core/migrations/__init__.py":{"content":"","size_bytes":0},"core/views.py":{"content":"from django.shortcuts import render, redirect\nfrom django.contrib import messages\n\n\ndef home_view(request):\n    \"\"\"Home page with navigation cards\"\"\"\n    return render(request, 'core/home.html')\n\n\ndef dashboard_view(request):\n    \"\"\"Health Snapshot page\"\"\"\n    # Import sample data\n    from sample_data import AI_INSIGHTS, ACTIVE_PROBLEMS\n    \n    context = {\n        'health_trends': AI_INSIGHTS['health_trends'],\n        'health_guidance': AI_INSIGHTS['health_guidance'],\n        'doctor_questions': AI_INSIGHTS['doctor_questions'],\n        'active_problems': ACTIVE_PROBLEMS,\n    }\n    return render(request, 'core/dashboard.html', context)\n\n\ndef link_records_view(request):\n    \"\"\"Link to external records portal\"\"\"\n    if request.method == 'POST':\n        portal_type = request.POST.get('portal_type')\n        messages.success(request, f'Connection request submitted for {portal_type}. You will receive a confirmation email shortly.')\n        return redirect('link_records')\n    \n    return render(request, 'core/link_records.html')\n\n\ndef upload_documents_view(request):\n    \"\"\"Upload medical documents\"\"\"\n    if request.method == 'POST':\n        uploaded_file = request.FILES.get('document')\n        document_type = request.POST.get('document_type')\n        \n        if uploaded_file:\n            messages.success(request, f'Document \"{uploaded_file.name}\" uploaded successfully!')\n            return redirect('upload_documents')\n        else:\n            messages.error(request, 'Please select a file to upload.')\n    \n    return render(request, 'core/upload_documents.html')\n\n\ndef profile_settings_view(request):\n    \"\"\"User profile and settings\"\"\"\n    if request.method == 'POST':\n        messages.success(request, 'Settings saved successfully!')\n        return redirect('profile_settings')\n    \n    # Sample user data\n    context = {\n        'user_name': 'Sarah Johnson',\n        'user_email': 'sarah.johnson@example.com',\n        'date_of_birth': '1992-05-15',\n    }\n    return render(request, 'core/profile_settings.html', context)\n\n\ndef share_with_doctor_view(request):\n    \"\"\"Patient view - shows shareable code and link\"\"\"\n    # Fixed demo code - in production this would be unique per patient\n    access_code = \"VH-4829\"\n    \n    # Build the full URL for doctor access\n    doctor_link = request.build_absolute_uri('/doctor-access/')\n    \n    context = {\n        'access_code': access_code,\n        'doctor_link': doctor_link,\n    }\n    return render(request, 'core/share_with_doctor.html', context)\n\n\ndef doctor_access_view(request):\n    \"\"\"Doctor code entry page\"\"\"\n    if request.method == 'POST':\n        entered_code = request.POST.get('access_code', '').strip().upper()\n        \n        # Demo: Accept code \"VH-4829\"\n        if entered_code == 'VH-4829' or entered_code == 'VH4829':\n            # Set session flag to authorize access to summary\n            request.session['doctor_access_authorized'] = True\n            return redirect('doctor_summary')\n        else:\n            messages.error(request, 'Invalid access code. Please check the code and try again.')\n    \n    return render(request, 'core/doctor_access.html')\n\n\ndef doctor_summary_view(request):\n    \"\"\"Doctor-facing comprehensive health summary\"\"\"\n    # Security: Check if doctor has entered valid access code\n    if not request.session.get('doctor_access_authorized', False):\n        messages.error(request, 'Please enter a valid access code to view patient summary.')\n        return redirect('doctor_access')\n    \n    from sample_data import AI_INSIGHTS, ACTIVE_PROBLEMS, VISIT_NOTES\n    \n    # Get all medications from most recent visits\n    all_medications = []\n    for visit in VISIT_NOTES[:3]:  # Get medications from 3 most recent visits\n        for med in visit.get('medications', []):\n            # Avoid duplicates\n            if not any(m['name'] == med['name'] for m in all_medications):\n                all_medications.append(med)\n    \n    # Get recent lab results from visit notes\n    recent_labs = []\n    for visit in VISIT_NOTES[:3]:\n        if 'labs' in visit.get('objective', {}):\n            labs_data = visit['objective']['labs']\n            recent_labs.append({\n                'date': visit['visit_date'],\n                'provider': visit['provider'],\n                'tests': labs_data\n            })\n    \n    # Wearable data (sample for demo)\n    wearable_summary = {\n        'avg_steps': '8,245',\n        'avg_heart_rate': '74 bpm',\n        'resting_heart_rate': '62 bpm',\n        'active_minutes': '32 min/day',\n        'sleep_avg': '6.8 hours',\n    }\n    \n    context = {\n        'patient_name': 'Sarah Johnson',\n        'patient_dob': '05/15/1992',\n        'patient_age': '33',  # Corrected age based on 1992 DOB\n        'health_trends': AI_INSIGHTS['health_trends'],\n        'health_guidance': AI_INSIGHTS['health_guidance'],\n        'doctor_questions': AI_INSIGHTS['doctor_questions'],\n        'active_problems': ACTIVE_PROBLEMS,\n        'medications': all_medications,\n        'recent_labs': recent_labs,\n        'wearable_data': wearable_summary,\n    }\n    return render(request, 'core/doctor_summary.html', context)\n","size_bytes":5136},"biogram/settings.py":{"content":"\"\"\"\nDjango settings for biogram project.\n\nGenerated by 'django-admin startproject' using Django 5.2.8.\n\nFor more information on this file, see\nhttps://docs.djangoproject.com/en/5.2/topics/settings/\n\nFor the full list of settings and their values, see\nhttps://docs.djangoproject.com/en/5.2/ref/settings/\n\"\"\"\n\nimport os\nfrom pathlib import Path\nfrom dotenv import load_dotenv\n\n# Load environment variables\nload_dotenv()\n\n# Build paths inside the project like this: BASE_DIR / 'subdir'.\nBASE_DIR = Path(__file__).resolve().parent.parent\n\n\n# Quick-start development settings - unsuitable for production\n# See https://docs.djangoproject.com/en/5.2/howto/deployment/checklist/\n\n# SECURITY WARNING: keep the secret key used in production secret!\nSECRET_KEY = os.environ.get('SECRET_KEY', 'django-insecure--ue!=l^aj+3)x&lgms5v4-uf+0@#$ir%ew7zv$65+#k+19x$)!')\n\n# SECURITY WARNING: don't run with debug turned on in production!\nDEBUG = os.environ.get('DEBUG', 'True') == 'True'\n\nALLOWED_HOSTS = ['*'] if DEBUG else os.environ.get('ALLOWED_HOSTS', '').split(',')\n\n# CSRF trusted origins for Replit\nCSRF_TRUSTED_ORIGINS = [\n    'https://*.replit.dev',\n    'https://*.replit.dev:5000',\n    'https://*.replit.app',\n    'https://*.replit.app:5000',\n    'https://*.repl.co',\n    'https://*.repl.co:5000',\n]\n\n# Application definition\n\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    \n    # Third-party apps\n    'rest_framework',\n    'corsheaders',\n    'django_htmx',\n    'django_bootstrap5',\n    \n    # Our apps\n    'core',\n    'health',\n]\n\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'whitenoise.middleware.WhiteNoiseMiddleware',  # For static files\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'corsheaders.middleware.CorsMiddleware',  # CORS headers\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n    'django_htmx.middleware.HtmxMiddleware',  # HTMX middleware\n]\n\nROOT_URLCONF = 'biogram.urls'\n\nTEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [BASE_DIR / 'templates'],\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n                'django.template.context_processors.media',\n                'django.template.context_processors.static',\n            ],\n        },\n    },\n]\n\nWSGI_APPLICATION = 'biogram.wsgi.application'\n\n\n# Database\n# https://docs.djangoproject.com/en/5.2/ref/settings/#databases\n\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.postgresql',\n        'NAME': os.environ.get('PGDATABASE', 'biogram'),\n        'USER': os.environ.get('PGUSER', 'postgres'),\n        'PASSWORD': os.environ.get('PGPASSWORD', ''),\n        'HOST': os.environ.get('PGHOST', 'localhost'),\n        'PORT': os.environ.get('PGPORT', '5432'),\n    }\n}\n\n\n# Password validation\n# https://docs.djangoproject.com/en/5.2/ref/settings/#auth-password-validators\n\nAUTH_PASSWORD_VALIDATORS = [\n    {\n        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',\n    },\n]\n\n\n# Internationalization\n# https://docs.djangoproject.com/en/5.2/topics/i18n/\n\nLANGUAGE_CODE = 'en-us'\n\nTIME_ZONE = 'UTC'\n\nUSE_I18N = True\n\nUSE_TZ = True\n\n\n# Static files (CSS, JavaScript, Images)\n# https://docs.djangoproject.com/en/5.2/howto/static-files/\n\nSTATIC_URL = '/static/'\nSTATIC_ROOT = BASE_DIR / 'staticfiles'\nSTATICFILES_DIRS = [\n    BASE_DIR / 'static',\n]\n\n# Media files\nMEDIA_URL = '/media/'\nMEDIA_ROOT = BASE_DIR / 'media'\n\n# Default primary key field type\n# https://docs.djangoproject.com/en/5.2/ref/settings/#default-auto-field\n\nDEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'\n\n# Authentication\nLOGIN_URL = '/auth/login/'\nLOGIN_REDIRECT_URL = '/'\nLOGOUT_REDIRECT_URL = '/auth/login/'\n\n# CORS settings\nCORS_ALLOW_ALL_ORIGINS = DEBUG\nCORS_ALLOWED_ORIGINS = [] if DEBUG else os.environ.get('CORS_ALLOWED_ORIGINS', '').split(',')\n\n# REST Framework settings\nREST_FRAMEWORK = {\n    'DEFAULT_AUTHENTICATION_CLASSES': [\n        'rest_framework.authentication.SessionAuthentication',\n    ],\n    'DEFAULT_PERMISSION_CLASSES': [\n        'rest_framework.permissions.AllowAny',\n    ],\n}\n\n# Bootstrap5 settings\nBOOTSTRAP5 = {\n    'theme_url': None,\n}\n\n# WhiteNoise settings for static files\nSTATICFILES_STORAGE = 'whitenoise.storage.CompressedManifestStaticFilesStorage'\n","size_bytes":5184},"health/migrations/0001_initial.py":{"content":"# Generated by Django 5.2.8 on 2025-11-07 03:23\n\nimport django.db.models.deletion\nimport django.utils.timezone\nfrom django.conf import settings\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    initial = True\n\n    dependencies = [\n        migrations.swappable_dependency(settings.AUTH_USER_MODEL),\n    ]\n\n    operations = [\n        migrations.CreateModel(\n            name='HealthRecord',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('event_type', models.CharField(choices=[('visit', 'Doctor Visit'), ('lab', 'Lab Result'), ('emergency', 'Emergency'), ('medication', 'Medication'), ('note', 'Note'), ('procedure', 'Procedure')], max_length=20)),\n                ('title', models.CharField(max_length=200)),\n                ('description', models.TextField()),\n                ('date', models.DateTimeField(default=django.utils.timezone.now)),\n                ('provider', models.CharField(blank=True, max_length=100)),\n                ('location', models.CharField(blank=True, max_length=200)),\n                ('attachments', models.FileField(blank=True, null=True, upload_to='health_records/')),\n                ('is_important', models.BooleanField(default=False)),\n                ('created_at', models.DateTimeField(auto_now_add=True)),\n                ('updated_at', models.DateTimeField(auto_now=True)),\n                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='health_records', to=settings.AUTH_USER_MODEL)),\n            ],\n            options={\n                'ordering': ['-date'],\n            },\n        ),\n        migrations.CreateModel(\n            name='AIInsight',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('insight_type', models.CharField(choices=[('action', 'Action Required'), ('trend', 'Trend Analysis'), ('reminder', 'Reminder'), ('suggestion', 'Suggestion')], max_length=20)),\n                ('priority', models.CharField(choices=[('urgent', 'Urgent'), ('routine', 'Routine'), ('followup', 'Follow-up')], max_length=20)),\n                ('title', models.CharField(max_length=200)),\n                ('description', models.TextField()),\n                ('is_completed', models.BooleanField(default=False)),\n                ('completed_at', models.DateTimeField(blank=True, null=True)),\n                ('created_at', models.DateTimeField(auto_now_add=True)),\n                ('updated_at', models.DateTimeField(auto_now=True)),\n                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ai_insights', to=settings.AUTH_USER_MODEL)),\n                ('related_record', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='health.healthrecord')),\n            ],\n            options={\n                'ordering': ['-created_at'],\n            },\n        ),\n        migrations.CreateModel(\n            name='LabResult',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('test_name', models.CharField(max_length=200)),\n                ('value', models.CharField(max_length=100)),\n                ('unit', models.CharField(blank=True, max_length=50)),\n                ('reference_range', models.CharField(blank=True, max_length=100)),\n                ('status', models.CharField(choices=[('normal', 'Normal'), ('abnormal', 'Abnormal'), ('critical', 'Critical'), ('pending', 'Pending')], default='pending', max_length=20)),\n                ('test_date', models.DateTimeField()),\n                ('provider', models.CharField(blank=True, max_length=100)),\n                ('notes', models.TextField(blank=True)),\n                ('created_at', models.DateTimeField(auto_now_add=True)),\n                ('updated_at', models.DateTimeField(auto_now=True)),\n                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lab_results', to=settings.AUTH_USER_MODEL)),\n            ],\n            options={\n                'ordering': ['-test_date'],\n            },\n        ),\n        migrations.CreateModel(\n            name='Medication',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('name', models.CharField(max_length=200)),\n                ('dosage', models.CharField(max_length=100)),\n                ('frequency', models.CharField(choices=[('daily', 'Daily'), ('twice_daily', 'Twice Daily'), ('three_times', 'Three Times Daily'), ('four_times', 'Four Times Daily'), ('weekly', 'Weekly'), ('as_needed', 'As Needed')], max_length=20)),\n                ('start_date', models.DateField()),\n                ('end_date', models.DateField(blank=True, null=True)),\n                ('prescriber', models.CharField(blank=True, max_length=100)),\n                ('purpose', models.TextField(blank=True)),\n                ('side_effects', models.TextField(blank=True)),\n                ('is_active', models.BooleanField(default=True)),\n                ('created_at', models.DateTimeField(auto_now_add=True)),\n                ('updated_at', models.DateTimeField(auto_now=True)),\n                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='medications', to=settings.AUTH_USER_MODEL)),\n            ],\n        ),\n        migrations.CreateModel(\n            name='QuickNote',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('content', models.TextField()),\n                ('is_pinned', models.BooleanField(default=False)),\n                ('created_at', models.DateTimeField(auto_now_add=True)),\n                ('updated_at', models.DateTimeField(auto_now=True)),\n                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='quick_notes', to=settings.AUTH_USER_MODEL)),\n            ],\n            options={\n                'ordering': ['-is_pinned', '-created_at'],\n            },\n        ),\n        migrations.CreateModel(\n            name='UserProfile',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('date_of_birth', models.DateField(blank=True, null=True)),\n                ('phone', models.CharField(blank=True, max_length=20)),\n                ('emergency_contact', models.CharField(blank=True, max_length=100)),\n                ('blood_type', models.CharField(blank=True, max_length=10)),\n                ('allergies', models.TextField(blank=True, help_text='List of allergies')),\n                ('created_at', models.DateTimeField(auto_now_add=True)),\n                ('updated_at', models.DateTimeField(auto_now=True)),\n                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='profile', to=settings.AUTH_USER_MODEL)),\n            ],\n        ),\n        migrations.CreateModel(\n            name='VitalSign',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('blood_pressure_systolic', models.IntegerField(blank=True, null=True)),\n                ('blood_pressure_diastolic', models.IntegerField(blank=True, null=True)),\n                ('heart_rate', models.IntegerField(blank=True, null=True)),\n                ('temperature', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),\n                ('weight', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),\n                ('height', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),\n                ('bmi', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),\n                ('oxygen_saturation', models.IntegerField(blank=True, null=True)),\n                ('respiratory_rate', models.IntegerField(blank=True, null=True)),\n                ('recorded_at', models.DateTimeField(default=django.utils.timezone.now)),\n                ('source', models.CharField(default='manual', max_length=50)),\n                ('created_at', models.DateTimeField(auto_now_add=True)),\n                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='vital_signs', to=settings.AUTH_USER_MODEL)),\n            ],\n            options={\n                'ordering': ['-recorded_at'],\n            },\n        ),\n        migrations.CreateModel(\n            name='WearableData',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('device_name', models.CharField(max_length=100)),\n                ('steps', models.IntegerField(blank=True, null=True)),\n                ('calories_burned', models.IntegerField(blank=True, null=True)),\n                ('active_minutes', models.IntegerField(blank=True, null=True)),\n                ('sleep_hours', models.DecimalField(blank=True, decimal_places=2, max_digits=4, null=True)),\n                ('heart_rate_avg', models.IntegerField(blank=True, null=True)),\n                ('heart_rate_min', models.IntegerField(blank=True, null=True)),\n                ('heart_rate_max', models.IntegerField(blank=True, null=True)),\n                ('stress_level', models.IntegerField(blank=True, null=True)),\n                ('date', models.DateField()),\n                ('sync_time', models.DateTimeField(auto_now_add=True)),\n                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='wearable_data', to=settings.AUTH_USER_MODEL)),\n            ],\n            options={\n                'ordering': ['-date'],\n                'unique_together': {('user', 'date', 'device_name')},\n            },\n        ),\n    ]\n","size_bytes":10151},"core/__init__.py":{"content":"","size_bytes":0},"create_superuser.py":{"content":"#!/usr/bin/env python\nimport os\nimport sys\nimport django\n\n# Setup Django\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'biogram.settings')\ndjango.setup()\n\nfrom django.contrib.auth.models import User\nfrom health.models import UserProfile\n\n# Create superuser if it doesn't exist\nif not User.objects.filter(username='admin').exists():\n    user = User.objects.create_superuser(\n        username='admin',\n        email='admin@biogram.com',\n        password='admin123'\n    )\n    # Create user profile\n    UserProfile.objects.create(user=user)\n    print(\"Superuser created successfully!\")\n    print(\"Username: admin\")\n    print(\"Password: admin123\")\nelse:\n    print(\"Superuser already exists.\")","size_bytes":689},"server.js":{"content":"#!/usr/bin/env node\n// Wrapper to run Django server through npm\nconst { spawn } = require('child_process');\n\nconsole.log('Starting Django server on port 5000...');\n\nconst django = spawn('python', ['manage.py', 'runserver', '0.0.0.0:5000'], {\n  stdio: 'inherit',\n  shell: true\n});\n\ndjango.on('error', (err) => {\n  console.error('Failed to start Django server:', err);\n  process.exit(1);\n});\n\ndjango.on('exit', (code) => {\n  console.log(`Django server exited with code ${code}`);\n  process.exit(code);\n});\n\n// Handle termination\nprocess.on('SIGTERM', () => {\n  django.kill('SIGTERM');\n});\n\nprocess.on('SIGINT', () => {\n  django.kill('SIGINT');\n});","size_bytes":645},"health/migrations/__init__.py":{"content":"","size_bytes":0},"health/models.py":{"content":"from django.db import models\nfrom django.contrib.auth.models import User\nfrom django.utils import timezone\n\n\nclass UserProfile(models.Model):\n    user = models.OneToOneField(User, on_delete=models.CASCADE, related_name='profile')\n    date_of_birth = models.DateField(null=True, blank=True)\n    phone = models.CharField(max_length=20, blank=True)\n    emergency_contact = models.CharField(max_length=100, blank=True)\n    blood_type = models.CharField(max_length=10, blank=True)\n    allergies = models.TextField(blank=True, help_text=\"List of allergies\")\n    created_at = models.DateTimeField(auto_now_add=True)\n    updated_at = models.DateTimeField(auto_now=True)\n    \n    def __str__(self):\n        return f\"{self.user.username}'s Profile\"\n\n\nclass HealthRecord(models.Model):\n    EVENT_TYPES = [\n        ('visit', 'Doctor Visit'),\n        ('lab', 'Lab Result'),\n        ('emergency', 'Emergency'),\n        ('medication', 'Medication'),\n        ('note', 'Note'),\n        ('procedure', 'Procedure'),\n    ]\n    \n    user = models.ForeignKey(User, on_delete=models.CASCADE, related_name='health_records')\n    event_type = models.CharField(max_length=20, choices=EVENT_TYPES)\n    title = models.CharField(max_length=200)\n    description = models.TextField()\n    date = models.DateTimeField(default=timezone.now)\n    provider = models.CharField(max_length=100, blank=True)\n    location = models.CharField(max_length=200, blank=True)\n    attachments = models.FileField(upload_to='health_records/', blank=True, null=True)\n    is_important = models.BooleanField(default=False)\n    created_at = models.DateTimeField(auto_now_add=True)\n    updated_at = models.DateTimeField(auto_now=True)\n    \n    class Meta:\n        ordering = ['-date']\n    \n    def __str__(self):\n        return f\"{self.user.username} - {self.title} ({self.date.date()})\"\n\n\nclass Medication(models.Model):\n    FREQUENCY_CHOICES = [\n        ('daily', 'Daily'),\n        ('twice_daily', 'Twice Daily'),\n        ('three_times', 'Three Times Daily'),\n        ('four_times', 'Four Times Daily'),\n        ('weekly', 'Weekly'),\n        ('as_needed', 'As Needed'),\n    ]\n    \n    user = models.ForeignKey(User, on_delete=models.CASCADE, related_name='medications')\n    name = models.CharField(max_length=200)\n    dosage = models.CharField(max_length=100)\n    frequency = models.CharField(max_length=20, choices=FREQUENCY_CHOICES)\n    start_date = models.DateField()\n    end_date = models.DateField(null=True, blank=True)\n    prescriber = models.CharField(max_length=100, blank=True)\n    purpose = models.TextField(blank=True)\n    side_effects = models.TextField(blank=True)\n    is_active = models.BooleanField(default=True)\n    created_at = models.DateTimeField(auto_now_add=True)\n    updated_at = models.DateTimeField(auto_now=True)\n    \n    def __str__(self):\n        return f\"{self.user.username} - {self.name} ({self.dosage})\"\n\n\nclass LabResult(models.Model):\n    RESULT_STATUS = [\n        ('normal', 'Normal'),\n        ('abnormal', 'Abnormal'),\n        ('critical', 'Critical'),\n        ('pending', 'Pending'),\n    ]\n    \n    user = models.ForeignKey(User, on_delete=models.CASCADE, related_name='lab_results')\n    test_name = models.CharField(max_length=200)\n    value = models.CharField(max_length=100)\n    unit = models.CharField(max_length=50, blank=True)\n    reference_range = models.CharField(max_length=100, blank=True)\n    status = models.CharField(max_length=20, choices=RESULT_STATUS, default='pending')\n    test_date = models.DateTimeField()\n    provider = models.CharField(max_length=100, blank=True)\n    notes = models.TextField(blank=True)\n    created_at = models.DateTimeField(auto_now_add=True)\n    updated_at = models.DateTimeField(auto_now=True)\n    \n    class Meta:\n        ordering = ['-test_date']\n    \n    def __str__(self):\n        return f\"{self.user.username} - {self.test_name} ({self.test_date.date()})\"\n\n\nclass VitalSign(models.Model):\n    user = models.ForeignKey(User, on_delete=models.CASCADE, related_name='vital_signs')\n    blood_pressure_systolic = models.IntegerField(null=True, blank=True)\n    blood_pressure_diastolic = models.IntegerField(null=True, blank=True)\n    heart_rate = models.IntegerField(null=True, blank=True)\n    temperature = models.DecimalField(max_digits=5, decimal_places=2, null=True, blank=True)\n    weight = models.DecimalField(max_digits=6, decimal_places=2, null=True, blank=True)\n    height = models.DecimalField(max_digits=5, decimal_places=2, null=True, blank=True)\n    bmi = models.DecimalField(max_digits=5, decimal_places=2, null=True, blank=True)\n    oxygen_saturation = models.IntegerField(null=True, blank=True)\n    respiratory_rate = models.IntegerField(null=True, blank=True)\n    recorded_at = models.DateTimeField(default=timezone.now)\n    source = models.CharField(max_length=50, default='manual')  # manual, wearable, clinic\n    created_at = models.DateTimeField(auto_now_add=True)\n    \n    class Meta:\n        ordering = ['-recorded_at']\n    \n    def __str__(self):\n        return f\"{self.user.username} - Vitals ({self.recorded_at.date()})\"\n\n\nclass WearableData(models.Model):\n    user = models.ForeignKey(User, on_delete=models.CASCADE, related_name='wearable_data')\n    device_name = models.CharField(max_length=100)\n    steps = models.IntegerField(null=True, blank=True)\n    calories_burned = models.IntegerField(null=True, blank=True)\n    active_minutes = models.IntegerField(null=True, blank=True)\n    sleep_hours = models.DecimalField(max_digits=4, decimal_places=2, null=True, blank=True)\n    heart_rate_avg = models.IntegerField(null=True, blank=True)\n    heart_rate_min = models.IntegerField(null=True, blank=True)\n    heart_rate_max = models.IntegerField(null=True, blank=True)\n    stress_level = models.IntegerField(null=True, blank=True)  # 1-10 scale\n    date = models.DateField()\n    sync_time = models.DateTimeField(auto_now_add=True)\n    \n    class Meta:\n        ordering = ['-date']\n        unique_together = ['user', 'date', 'device_name']\n    \n    def __str__(self):\n        return f\"{self.user.username} - {self.device_name} ({self.date})\"\n\n\nclass AIInsight(models.Model):\n    PRIORITY_LEVELS = [\n        ('urgent', 'Urgent'),\n        ('routine', 'Routine'),\n        ('followup', 'Follow-up'),\n    ]\n    \n    INSIGHT_TYPES = [\n        ('action', 'Action Required'),\n        ('trend', 'Trend Analysis'),\n        ('reminder', 'Reminder'),\n        ('suggestion', 'Suggestion'),\n    ]\n    \n    user = models.ForeignKey(User, on_delete=models.CASCADE, related_name='ai_insights')\n    insight_type = models.CharField(max_length=20, choices=INSIGHT_TYPES)\n    priority = models.CharField(max_length=20, choices=PRIORITY_LEVELS)\n    title = models.CharField(max_length=200)\n    description = models.TextField()\n    related_record = models.ForeignKey(HealthRecord, on_delete=models.SET_NULL, null=True, blank=True)\n    is_completed = models.BooleanField(default=False)\n    completed_at = models.DateTimeField(null=True, blank=True)\n    created_at = models.DateTimeField(auto_now_add=True)\n    updated_at = models.DateTimeField(auto_now=True)\n    \n    class Meta:\n        ordering = ['-created_at']\n    \n    def __str__(self):\n        return f\"{self.user.username} - {self.title}\"\n\n\nclass QuickNote(models.Model):\n    user = models.ForeignKey(User, on_delete=models.CASCADE, related_name='quick_notes')\n    content = models.TextField()\n    is_pinned = models.BooleanField(default=False)\n    created_at = models.DateTimeField(auto_now_add=True)\n    updated_at = models.DateTimeField(auto_now=True)\n    \n    class Meta:\n        ordering = ['-is_pinned', '-created_at']\n    \n    def __str__(self):\n        return f\"{self.user.username} - Note ({self.created_at.date()})\"\n","size_bytes":7708},"run.sh":{"content":"#!/bin/bash\necho \"Starting Biogram Django Server...\"\npython manage.py migrate --no-input\npython manage.py runserver 0.0.0.0:5000","size_bytes":128},"health/__init__.py":{"content":"","size_bytes":0},"core/apps.py":{"content":"from django.apps import AppConfig\n\n\nclass CoreConfig(AppConfig):\n    default_auto_field = 'django.db.models.BigAutoField'\n    name = 'core'\n","size_bytes":140},"health/tests.py":{"content":"from django.test import TestCase\n\n# Create your tests here.\n","size_bytes":60},"biogram/wsgi.py":{"content":"\"\"\"\nWSGI config for biogram project.\n\nIt exposes the WSGI callable as a module-level variable named ``application``.\n\nFor more information on this file, see\nhttps://docs.djangoproject.com/en/5.2/howto/deployment/wsgi/\n\"\"\"\n\nimport os\n\nfrom django.core.wsgi import get_wsgi_application\n\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'biogram.settings')\n\napplication = get_wsgi_application()\n","size_bytes":391},"health/views.py":{"content":"from django.shortcuts import render\nfrom django.utils import timezone\nfrom datetime import timedelta\n\n\ndef health_timeline(request):\n    # Import sample timeline data\n    from sample_data import TIMELINE_EVENTS\n    \n    # Sort timeline events by date (most recent first)\n    sorted_timeline = sorted(TIMELINE_EVENTS, key=lambda x: x['date'], reverse=True)\n    \n    context = {\n        'timeline_events': sorted_timeline,\n    }\n    \n    return render(request, 'health/timeline.html', context)\n\n\ndef wearable_insights(request):\n    # Public demo - using sample data\n    end_date = timezone.now().date()\n    start_date = end_date - timedelta(days=7)\n    \n    # Sample wearable data for demo\n    wearable_data = []\n    for i in range(7):\n        date = end_date - timedelta(days=i)\n        wearable_data.append({\n            'date': date,\n            'device_name': 'Apple Watch',\n            'steps': 8500 + (i * 500),\n            'calories_burned': 2200 + (i * 100),\n            'active_minutes': 45 + (i * 5),\n            'sleep_hours': 7.2 + (i * 0.2),\n            'heart_rate_avg': 68 + (i * 2),\n        })\n    \n    # Calculate aggregates from sample data\n    aggregates = {\n        'avg_steps': 10000,\n        'avg_calories': 2400,\n        'avg_sleep': 7.5,\n        'avg_heart_rate': 72,\n        'max_heart_rate': 145,\n        'min_heart_rate': 58,\n    }\n    \n    # Sample AI insights\n    insights = [\n        {\n            'type': 'success',\n            'message': 'Great job! Your activity levels are consistently above the recommended 10,000 steps per day.'\n        },\n        {\n            'type': 'info',\n            'message': 'Your sleep patterns are healthy, averaging 7.5 hours per night.'\n        }\n    ]\n    \n    context = {\n        'wearable_data': wearable_data,\n        'aggregates': aggregates,\n        'insights': insights,\n        'start_date': start_date,\n        'end_date': end_date,\n    }\n    \n    return render(request, 'health/wearable_insights.html', context)\n\n\ndef medications_list(request):\n    # Public demo - using sample medication data\n    from sample_data import MEDICATION_INTERACTIONS, VISIT_NOTES\n    \n    # Extract all medications from visit notes\n    medications = []\n    for visit in VISIT_NOTES:\n        for med in visit['medications']:\n            med_name = med['name'].split()[0]  # Get base drug name\n            med_data = {\n                'name': med['name'],\n                'dose': med['dose'],\n                'frequency': med['frequency'],\n                'purpose': med['purpose'],\n                'interactions': MEDICATION_INTERACTIONS.get(med_name, {}).get('interactions', []),\n                'side_effects': MEDICATION_INTERACTIONS.get(med_name, {}).get('side_effects', []),\n                'started': visit['visit_date'],  # Use visit date as start date\n                'prescriber': visit['provider']\n            }\n            # Avoid duplicates\n            if not any(m['name'] == med_data['name'] for m in medications):\n                medications.append(med_data)\n    \n    # For demo: all are active medications\n    # In a real app, you'd filter based on end_date or is_active flag\n    context = {\n        'active_medications': medications,\n        'inactive_medications': [],  # Empty for demo\n    }\n    \n    return render(request, 'health/medications.html', context)\n\n\ndef lab_results(request):\n    # Public demo - using sample lab results\n    from datetime import date\n    \n    sample_results = [\n        {\n            'test_date': date(2025, 10, 15),\n            'test_name': 'Hemoglobin A1C',\n            'value': '5.4',\n            'unit': '%',\n            'reference_range': '4.0 - 5.6%',\n            'status': 'normal',\n            'provider': 'Dr. Sarah Chen',\n            'notes': 'Excellent diabetes control. Continue current lifestyle.'\n        },\n        {\n            'test_date': date(2025, 10, 15),\n            'test_name': 'LDL Cholesterol',\n            'value': '95',\n            'unit': 'mg/dL',\n            'reference_range': '< 100 mg/dL',\n            'status': 'normal',\n            'provider': 'Dr. Sarah Chen',\n            'notes': 'Well-controlled with current medication.'\n        },\n        {\n            'test_date': date(2025, 9, 20),\n            'test_name': 'TSH',\n            'value': '2.8',\n            'unit': 'mIU/L',\n            'reference_range': '0.4 - 4.0 mIU/L',\n            'status': 'normal',\n            'provider': 'Dr. Michael Torres',\n            'notes': 'Thyroid function is optimal.'\n        },\n        {\n            'test_date': date(2025, 8, 5),\n            'test_name': 'Vitamin D',\n            'value': '28',\n            'unit': 'ng/mL',\n            'reference_range': '30 - 100 ng/mL',\n            'status': 'abnormal',\n            'provider': 'Dr. Sarah Chen',\n            'notes': 'Slightly low. Recommend 2000 IU daily supplement.'\n        },\n    ]\n    \n    context = {\n        'lab_results': sample_results,\n    }\n    \n    return render(request, 'health/lab_results.html', context)\n","size_bytes":5002},"core/models.py":{"content":"from django.db import models\n\n# Create your models here.\n","size_bytes":57},"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"django>=5.2.8\",\n    \"django-bootstrap5>=25.2\",\n    \"django-cors-headers>=4.9.0\",\n    \"django-htmx>=1.26.0\",\n    \"djangorestframework>=3.16.1\",\n    \"gunicorn>=23.0.0\",\n    \"pillow>=12.0.0\",\n    \"psycopg2-binary>=2.9.11\",\n    \"python-dotenv>=1.2.1\",\n    \"whitenoise>=6.11.0\",\n]\n","size_bytes":423},"manage.py":{"content":"#!/usr/bin/env python\n\"\"\"Django's command-line utility for administrative tasks.\"\"\"\nimport os\nimport sys\n\n\ndef main():\n    \"\"\"Run administrative tasks.\"\"\"\n    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'biogram.settings')\n    try:\n        from django.core.management import execute_from_command_line\n    except ImportError as exc:\n        raise ImportError(\n            \"Couldn't import Django. Are you sure it's installed and \"\n            \"available on your PYTHONPATH environment variable? Did you \"\n            \"forget to activate a virtual environment?\"\n        ) from exc\n    execute_from_command_line(sys.argv)\n\n\nif __name__ == '__main__':\n    main()\n","size_bytes":663},"core/tests.py":{"content":"from django.test import TestCase\n\n# Create your tests here.\n","size_bytes":60}},"version":2}